{"ast":null,"code":"import _classCallCheck from\"H:/KULIAH/ReactJS/Login/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"H:/KULIAH/ReactJS/Login/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"H:/KULIAH/ReactJS/Login/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"H:/KULIAH/ReactJS/Login/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import axios from\"axios\";import{Redirect}from\"react-router-dom\";import CssBaseline from\"@material-ui/core/CssBaseline\";import Container from\"@material-ui/core/Container\";import Button from\"@material-ui/core/Button\";import Typography from\"@material-ui/core/Typography\";import{makeStyles}from\"@material-ui/core/styles\";import TextField from\"@material-ui/core/TextField\";var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:\"100%\",marginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});var LoginContainer=/*#__PURE__*/function(_Component){_inherits(LoginContainer,_Component);var _super=_createSuper(LoginContainer);function LoginContainer(props){var _this;_classCallCheck(this,LoginContainer);_this=_super.call(this,props);_this.handleSubmit=function(e){e.preventDefault();var data={username:_this.username,password:_this.password};axios.post(\"https://smpnapi.herokuapp.com/token-auth/\",data).then(function(res){localStorage.setItem(\"token\",res.data.token);localStorage.setItem(\"roleuser1\",res.data.user.user_permissions);_this.setState({loggedin:true});window.location.reload();// BUAT REFRESH PAGE\nconsole.log(res);}).catch(function(err){console.log(err);});};var token=localStorage.getItem(\"token\");var loggedin=true;if(token==null){loggedin=false;}_this.state={loggedin:loggedin};return _this;}_createClass(LoginContainer,[{key:\"render\",value:function render(){var _this2=this;if(this.state.loggedin){return/*#__PURE__*/_jsx(Redirect,{to:\"/Home\"});}return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(\"div\",{className:useStyles.paper,children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Sign in\"})}),/*#__PURE__*/_jsxs(\"form\",{className:useStyles.form,onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",autoFocus:true,onChange:function onChange(e){return _this2.username=e.target.value;}}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",onChange:function onChange(e){return _this2.password=e.target.value;}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",children:\"Sign In\"})]})]})]});}}]);return LoginContainer;}(Component);export{LoginContainer as default};","map":{"version":3,"sources":["H:/KULIAH/ReactJS/Login/frontend2/src/containers/LoginContainer.js"],"names":["React","Component","axios","Redirect","CssBaseline","Container","Button","Typography","makeStyles","TextField","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","LoginContainer","props","handleSubmit","e","preventDefault","data","username","password","post","then","res","localStorage","setItem","token","user","user_permissions","setState","loggedin","window","location","reload","console","log","catch","err","getItem","state","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default class LoginContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    let loggedin = true;\r\n    if (token == null) {\r\n      loggedin = false;\r\n    }\r\n\r\n    this.state = {\r\n      loggedin,\r\n    };\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const data = {\r\n      username: this.username,\r\n      password: this.password,\r\n    };\r\n\r\n    axios\r\n      .post(\"https://smpnapi.herokuapp.com/token-auth/\", data)\r\n      .then((res) => {\r\n        localStorage.setItem(\"token\", res.data.token);\r\n        localStorage.setItem(\"roleuser1\", res.data.user.user_permissions);\r\n        this.setState({\r\n          loggedin: true,\r\n        });\r\n        window.location.reload(); // BUAT REFRESH PAGE\r\n        console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    if (this.state.loggedin) {\r\n      return <Redirect to=\"/Home\" />;\r\n    }\r\n    return (\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n        <div className={useStyles.paper}>\r\n          <div className=\"text-center\">\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              Sign in\r\n            </Typography>\r\n          </div>\r\n          <form className={useStyles.form} onSubmit={this.handleSubmit}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              name=\"username\"\r\n              autoComplete=\"username\"\r\n              autoFocus\r\n              onChange={(e) => (this.username = e.target.value)}\r\n            />\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              onChange={(e) => (this.password = e.target.value)}\r\n            />\r\n            <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\r\n              Sign In\r\n            </Button>\r\n          </form>\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}