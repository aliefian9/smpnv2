{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"H:\\\\KULIAH\\\\ReactJS\\\\frontend1\\\\src\\\\LoginTes\\\\App.js\";\nimport React, { Component } from \"react\";\nimport Nav from \"./Nav\";\nimport LoginForm from \"./LoginForm\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handle_login = (e, data) => {\n      e.preventDefault();\n      fetch(\"https://smpnapi.herokuapp.com/token-auth/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      }).then(res => res.json()).then(json => {\n        localStorage.setItem(\"token\", json.token);\n        this.setState({\n          logged_in: true,\n          displayed_form: \"\",\n          username: json.user.username\n        });\n      });\n    };\n\n    this.handle_logout = () => {\n      localStorage.removeItem(\"token\");\n      this.setState({\n        logged_in: false,\n        username: \"\"\n      });\n    };\n\n    this.display_form = form => {\n      this.setState({\n        displayed_form: form\n      });\n    };\n\n    this.state = {\n      displayed_form: \"\",\n      logged_in: localStorage.getItem(\"token\") ? true : false,\n      username: \"\"\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.logged_in) {\n      fetch(\"http://smpnapi.herokuapp.com/api/v3/current_user/\", {\n        headers: {\n          Authorization: `JWT ${localStorage.getItem(\"token\")}`\n        }\n      }).then(res => res.json()).then(json => {\n        this.setState({\n          username: json.username\n        });\n      });\n    }\n  }\n\n  render() {\n    let form;\n\n    switch (this.state.displayed_form) {\n      case \"login\":\n        form = /*#__PURE__*/_jsxDEV(LoginForm, {\n          handle_login: this.handle_login\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 16\n        }, this);\n        break;\n\n      default:\n        form = null;\n    }\n\n    const {\n      redirect\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Nav, {\n        logged_in: this.state.logged_in,\n        display_form: this.display_form,\n        handle_logout: this.handle_logout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), form, this.state.logged_in ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/somewhere\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }, this) : \"Please Log In\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["H:/KULIAH/ReactJS/frontend1/src/LoginTes/App.js"],"names":["React","Component","Nav","LoginForm","App","constructor","props","handle_login","e","data","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","localStorage","setItem","token","setState","logged_in","displayed_form","username","user","handle_logout","removeItem","display_form","form","state","getItem","componentDidMount","Authorization","render","redirect"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Nav from \"./Nav\";\r\nimport LoginForm from \"./LoginForm\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      displayed_form: \"\",\r\n      logged_in: localStorage.getItem(\"token\") ? true : false,\r\n      username: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.logged_in) {\r\n      fetch(\"http://smpnapi.herokuapp.com/api/v3/current_user/\", {\r\n        headers: {\r\n          Authorization: `JWT ${localStorage.getItem(\"token\")}`,\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((json) => {\r\n          this.setState({ username: json.username });\r\n        });\r\n    }\r\n  }\r\n\r\n  handle_login = (e, data) => {\r\n    e.preventDefault();\r\n    fetch(\"https://smpnapi.herokuapp.com/token-auth/\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        localStorage.setItem(\"token\", json.token);\r\n        this.setState({\r\n          logged_in: true,\r\n          displayed_form: \"\",\r\n          username: json.user.username,\r\n        });\r\n      });\r\n  };\r\n\r\n  handle_logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    this.setState({ logged_in: false, username: \"\" });\r\n  };\r\n\r\n  display_form = (form) => {\r\n    this.setState({\r\n      displayed_form: form,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let form;\r\n    switch (this.state.displayed_form) {\r\n      case \"login\":\r\n        form = <LoginForm handle_login={this.handle_login} />;\r\n        break;\r\n      default:\r\n        form = null;\r\n    }\r\n\r\n    const { redirect } = this.state;\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Nav\r\n          logged_in={this.state.logged_in}\r\n          display_form={this.display_form}\r\n          handle_logout={this.handle_logout}\r\n        />\r\n        {form}\r\n\r\n        {this.state.logged_in\r\n            ? <Redirect to='/somewhere'/>\r\n            : \"Please Log In\"}\r\n        \r\n        {/* <h3>\r\n          {this.state.logged_in\r\n            ? `Hello, ${this.state.username}`\r\n            : \"Please Log In\"}\r\n        </h3> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}